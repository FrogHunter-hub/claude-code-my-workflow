# CLAUDE.MD -- Academic Research Project with Claude Code

**Project:** Managerial Theories of Technology
**Institution:** 
**Authors:** 
**Branch:** main

---

## Core Principles

- **Plan first** -- enter plan mode before non-trivial tasks; save plans to `quality_reports/plans/`
- **Verify after** -- compile/run and confirm output at the end of every task
- **Single source of truth** -- Overleaf `.tex` is the authoritative manuscript; all tables/figures are generated by code
- **Quality gates** -- nothing ships below 80/100
- **[LEARN] tags** -- when corrected, save `[LEARN:category] wrong → right` to MEMORY.md

---

## Platform & Environment

- **OS:** Windows 10/11
- **Shell:** PowerShell (all scripts `.ps1`; bash stubs redirect)
- **Python:** 3.11 via conda env `Technology` at `D:\anaconda\envs\Technology\python.exe`
- **Stata:** StataSE 19.5 at `D:\StataSE-64.exe` (env var: `STATA_EXE`)
- **LaTeX:** Overleaf (remote); local pdflatex available for verification
- **Editor:** VS Code with Claude Code panel

---

## Folder Structure

```
Managerial-Theories-of-Technology/
├── CLAUDE.md                        # This file
├── .claude/                         # Rules, skills, agents, hooks
├── Overleaf/                        # Manuscript LaTeX source (SSOT)
│   ├── main.tex                     # Main paper
│   ├── references.bib               # Bibliography
│   └── Methodology/                 # Appendix methodology docs
├── src/
│   ├── py/                          # Python pipeline (clean → analyze)
│   │   ├── 01_clean.py
│   │   ├── 02_analysis.py
│   │   └── manifest.py              # Run manifest utility
│   └── stata/                       # Stata do-files (regressions)
│       ├── 01_setup.do
│       └── 02_analysis.do
├── data/                            # Raw inputs (read-only, not in git)
│   └── DATA_DICTIONARY.md
├── data_processed/                  # Generated by 01_clean.py
├── results/                         # Tables, figures, manifests
│   └── runs/                        # JSON run manifests
├── logs/                            # Execution logs
├── tests/                           # pytest suite
├── quality_reports/                 # Plans, session logs, reviews
│   ├── plans/
│   ├── session_logs/
│   ├── merges/
│   └── TEMPLATE.md
├── explorations/                    # Research sandbox (fast-track rules)
├── master_supporting_docs/          # Reference papers and slides
├── scripts/                         # Utility scripts
├── templates/                       # Session log, quality report templates
└── Figures/                         # Generated figures for paper
```

---

## Commands

```powershell
# Python pipeline (Technology conda env)
conda run -n Technology python src/py/01_clean.py
conda run -n Technology python src/py/02_analysis.py

# Stata pipeline
& $env:STATA_EXE /e do "src/stata/01_setup.do"
& $env:STATA_EXE /e do "src/stata/02_analysis.do"

# Tests
conda run -n Technology pytest -q tests/

# Lint
conda run -n Technology black --check src/py
conda run -n Technology flake8 src/py

# LaTeX (local verification -- main editing is on Overleaf)
cd Overleaf && pdflatex -interaction=nonstopmode main.tex && bibtex main && pdflatex main.tex && pdflatex main.tex
```

---

## Quality Thresholds

| Score | Gate | Meaning |
|-------|------|---------|
| 80 | Commit | Good enough to save |
| 90 | PR | Ready for co-author review |
| 95 | Excellence | Publication-ready |

One **critical** finding → automatic fail regardless of score.

---

## Skills Quick Reference

| Command | What It Does |
|---------|-------------|
| `/compile-latex [file]` | pdflatex 3-pass + bibtex |
| `/run-python [step]` | Run Python pipeline step in Technology env |
| `/run-stata [step]` | Run Stata do-file |
| `/proofread [file]` | Grammar/typo/notation review |
| `/review-paper [file]` | Full manuscript review (referee-style) |
| `/review-python [file]` | Python code quality review |
| `/review-stata [file]` | Stata code quality review |
| `/data-analysis [goal]` | End-to-end Python analysis |
| `/devils-advocate` | Challenge identification strategy |
| `/validate-bib` | Cross-reference citations |
| `/lit-review [topic]` | Literature search + synthesis |
| `/research-ideation [topic]` | Research questions + strategies |
| `/interview-me [topic]` | Interactive research interview |
| `/commit [msg]` | Stage, commit, push |

---

## Paper Structure (Sections I–VII)

| Section | Title | Key Content | Status |
|---------|-------|-------------|--------|
| I | Introduction | Motivation, 4 findings, contribution, caveats | Drafted |
| II | Data and Measurement | Corpus, LLM pipeline, TNT-LLM taxonomy, panel | Notes only |
| III | Validation | Face validity, external proxies, measurement error | Notes only |
| IV | Structure of Beliefs | Variance decomposition, spillover, dynamics | Table V drafted |
| V | Beliefs and Firm Actions | Growth vs efficiency, cause-side, disagreement | Notes only |
| VI | Beliefs and Misallocation | Ex post benchmarking, transfer, aggregate cycles | Notes only |
| VII | Conclusion | Summary, caveats, future research | Notes only |

---

## Key Empirical Facts

| Fact | Source |
|------|--------|
| 450,095 earnings calls, 19,469 firms, 94 countries, 2002–2024 | Refinitiv Eikon |
| 29 disruptive technologies | Kalyani et al. (2025, QJE) |
| 187,647 causal snippets → 197,818 cause spans + 385,418 effect spans | LLM extraction |
| 5 macro cause + 5 macro effect categories | TNT-LLM taxonomy |
| Firm-level variation = 60–74% of total (Table V) | Variance decomposition |

---

## Notation & Variable Conventions

| Symbol | Meaning | Introduced |
|--------|---------|------------|
| Cause share | Share of macro-cause category in firm × tech × quarter | Sec II.D |
| Effect share | Share of macro-effect category in firm × tech × quarter | Sec II.D |
| Growth orientation | Revenue Growth + Market Expansion + Product Innovation share | Sec V.A |
| Efficiency orientation | Cost Reduction + Operational Efficiency share | Sec V.A |
| Disagreement | Distance between manager and analyst cause/effect vectors | Sec II.E |

---

## Non-Negotiables

- Raw data in `data/` is **read-only** — never overwrite
- All Python scripts use repo-relative paths via `Path(__file__).resolve().parents[2]`
- Deterministic seeds (`SEED = 42`) set once at top
- Every pipeline run writes a JSON manifest to `results/runs/`
- Stata do-files: `version 19.5`, `set more off`, log to `logs/`
- Tables exported as both `.csv` and `.tex` to `results/`
- Figures saved as `.pdf` and `.png` to `Figures/` with explicit dimensions

---

## Preferences

**Visual:** Publication-quality (JF/QJE style). White background. Matplotlib/seaborn. No default colors.
**Reporting:** Concise bullets. Details on request.
**Session logs:** Always (post-plan, incremental, end-of-session).
**Replication:** Strict. Flag any tolerance exceedance.

---

## Exploration Mode

For experimental work, use the **Fast-Track** workflow:
- Work in `explorations/` folder
- 60/100 quality threshold (vs. 80/100 for production)
- No plan needed — just a research value check
- See `.claude/rules/exploration-fast-track.md`
